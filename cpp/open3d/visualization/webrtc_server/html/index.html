<!DOCTYPE html>
<html lang="en">

<head>

		<link rel="shortcut icon" type="image/x-icon" href="favicon.ico">

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Indoor Lidar-RGBD Scan Dataset</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/mystyle_dataset.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

	<!-- OPEN3D SCRIPTS -->
    <script src="libs/adapter.min.js"></script>
    <script src="webrtcstreamer.js"></script>
    <script>
      /**
       * Global WebRTC configs.
       */
      let webRtcOptions = "rtptransport=tcp&timeout=60";

      /**
       * WebRTC connections.
       */
      let webRtcServerList = {};

      /**
       * Get the div where to insert a video.
       */
      function getContentDiv() {
        let contentDiv = document.getElementById("content");
        return contentDiv;
      }

      function setDifference(setA, setB) {
        let _difference = new Set(setA);
        for (let elem of setB) {
          _difference.delete(elem);
        }
        return _difference;
      }

      /**
       * Init device list
       * @param {object} mediaList A map of media. E.g.
       * let mediaList = {
       *  0: {video: "window_0"},
       *  1: {video: "window_1"},
       * }
       */
      function updateMediaList(mediaList) {
        // Create navigation menu.
        let menu = document.getElementById("menu");

        // The current video source that the server is serving.
        let validWindowIds = new Set();
        for (let key in mediaList) {
          validWindowIds.add(mediaList[key].video);
        }

        // Collect stale and new URLs. Avoid "removing while iterating".
        let existingWindowIds = new Set();
        let staleWindowIds = new Array();
        for (let i = 0; i < menu.children.length; i++) {
          let navElt = menu.children[i];
          let windowId = navElt.windowId;
          existingWindowIds.add(windowId);
          if (!validWindowIds.has(windowId)) {
            staleWindowIds.push(windowId);
          }
        }
        let newWindowIds = [
          ...setDifference(validWindowIds, existingWindowIds),
        ];

        // Remove stale URLs.
        staleWindowIds.forEach(function (windowId) {
          let videoId = "video_" + windowId;
          let id = "nav_" + videoId;
          document.getElementById(id).remove();
        });

        // Append new URLs to the menu bar.
        newWindowIds.forEach(function (windowId) {
          let videoId = "video_" + windowId;
          let navId = "nav_" + videoId;
          let navElt = document.createElement("a");
          navElt.text = windowId;
          navElt.windowId = windowId;
          navElt.id = navId;
          navElt.onclick = function () {
            if (this.className === "active") {
              delConnection(this.windowId);
            } else {
              addConnection(this.windowId);
            }
          };
          menu.appendChild(navElt);
        });

        // Connect to the new URLs, this will also highlight the menu entry.
        newWindowIds.forEach((windowId) => {
          addConnection(windowId);
        });
      }

      /**
       * Delete a WebRTC client connection.
       */
      function delConnection(windowId) {
        console.log("delConnection: ", windowId);
        let videoId = "video_" + windowId;

        // Disconnect WebRTC connection.
        let webrtcServer = webRtcServerList[videoId];
        if (webrtcServer) {
          webrtcServer.disconnect();
          webRtcServerList[videoId] = undefined;
        }
      }

      /**
       * Add a WebRTC client connection.
       */
      function addConnection(windowId) {
        let videoId = "video_" + windowId;

        // Add a video element to display WebRTC stream.
        if (document.getElementById(videoId) === null) {
          let contentDiv = getContentDiv();
          if (contentDiv) {
            let divElt = document.createElement("div");
            divElt.id = "div_" + videoId;

            let nameElt = document.createElement("h2");
            nameElt.id = "title_" + videoId;
            nameElt.innerHTML = "<div>" + windowId + "</div>";
            divElt.appendChild(nameElt);

            let videoElt = document.createElement("video");
            videoElt.id = videoId;
            videoElt.title = windowId;
            videoElt.muted = true;
            videoElt.controls = false;
            videoElt.playsinline = true;

            divElt.appendChild(videoElt);

            contentDiv.appendChild(divElt);
          }
        }

        let videoElt = document.getElementById(videoId);
        if (videoElt) {
          let onClose = function () {
            console.log("onClose() called for videoId:", videoId);

            // Remove the video element and its tile.
            let divElt = document.getElementById("div_" + videoId);
            divElt.parentElement.removeChild(divElt);

            // Un-highlight the navigation.
            let navElt = document.getElementById("nav_" + videoId);
            navElt.className = "";

            WebRtcStreamer.getMediaList()
              .then((response) => response.json())
              .then((response) => updateMediaList(response));
          };

          // Connect video element to WebRTC stream.
          let webRtcClient = new WebRtcStreamer(videoId, "", onClose, null);
          console.log("[addConnection] videoId: " + videoId);

          webRtcClient.connect(windowId, /*audio*/ null, webRtcOptions);
          console.log("[addConnection] windowId: " + windowId);
          console.log("[addConnection] options: " + webRtcOptions);

          // Highlight the navigation.
          let navElt = document.getElementById("nav_" + videoId);
          navElt.className = "active";

          // Register WebRTC streamer connection.
          webRtcServerList[videoId] = webRtcClient;
        }
      }

      /**
       * Load/unload callbacks.
       */
      window.onload = function () {
        WebRtcStreamer.getMediaList()
          .then((response) => response.json())
          .then((response) => updateMediaList(response));
      };
      window.onbeforeunload = function () {
        for (let key in webRtcServerList) {
          webRtcServerList[key].disconnect();
        }
      };
    </script>

	<!-- OPEN3D SCRIPTS END -->

</head>

<body id="page-top" class="index">
<!-- Navigation -->
<nav id="mainNav" class="navbar navbar-default navbar-fixed-top navbar-custom">
	<div class="container">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header page-scroll">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span> Menu <i class="fa fa-bars"></i>
			</button>
			<a class="navbar-brand" href="index.html">Indoor Lidar-RGBD Scan Dataset</a>
		</div>
		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav navbar-right">
				<li class="active">
					<a href="index.html">Home</a>
				</li>
				<li>
					<a href="download.html">Download</a>
				</li>
				<li>
					<a href="code.html">Code</a>
				</li>
				<li>
					<a href="gallery.html">Gallery</a>
				</li>
				<li >
					<a href="license.html">License</a>
				</li>
				<li >
					<a href="contact.html">Contact</a>
				</li>
			</ul>
		</div>
		<!-- /.navbar-collapse -->
	</div>
<!-- /.container-fluid -->
</nav>

<!-- Header -->
<header>
	<div class="container" id="maincontent" tabindex="-1">
		<div class="row">
		</div>
	</div>
</header>

<div id="myCarousel" class="carousel slide" data-ride="carousel">
  <!-- Indicators -->
  <ol class="carousel-indicators">
    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
    <li data-target="#myCarousel" data-slide-to="1"></li>
    <li data-target="#myCarousel" data-slide-to="2"></li>
		<li data-target="#myCarousel" data-slide-to="3"></li>
		<li data-target="#myCarousel" data-slide-to="4"></li>
  </ol>

  <!-- Wrapper for slides -->
  <div class="carousel-inner">
    <div class="item active">
      <img src="image/index/gth_apt.jpg" alt="apartment">
			<div class="carousel-caption">
        <h3>Apartment</h3>
      </div>
    </div>

    <div class="item">
      <img src="image/index/gth_bedroom.jpg" alt="bedroom">
			<div class="carousel-caption">
        <h3>Bedroom</h3>
      </div>
    </div>

    <div class="item">
      <img src="image/index/gth_boardroom.jpg" alt="boardroom">
			<div class="carousel-caption">
        <h3>Boardroom</h3>
      </div>
    </div>

		<div class="item">
			<img src="image/index/gth_lobby.jpg" alt="lobby">
			<div class="carousel-caption">
				<h3>Lobby</h3>
			</div>
		</div>

		<div class="item">
			<img src="image/index/gth_loft.jpg" alt="loft">
			<div class="carousel-caption">
				<h3>Loft</h3>
			</div>
		</div>
  </div>

  <!-- Left and right controls -->
  <a class="left carousel-control" href="#myCarousel" data-slide="prev">
    <span class="glyphicon glyphicon-chevron-left"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="right carousel-control" href="#myCarousel" data-slide="next">
    <span class="glyphicon glyphicon-chevron-right"></span>
    <span class="sr-only">Next</span>
  </a>
</div>

<div class="col-lg-8 col-lg-offset-2 text-right">
	<p>*Images shown above are meshed Lidar scan renderings (left) and 360 panorama images (right).</p>
</div>
<div class="col-lg-8 col-lg-offset-2">
	<h2>Introduction</h2>
		<p class="lead"> To our knowledge, no publicly available RGB-D dataset provides dense ground-truth surface geometry across largescale real-world scenes. To complement existing datasets, we have created ground-truth models of five complete indoor environments using a high-end laser scanner, and captured RGB-D video sequences of these scenes. This data
		enables quantitative evaluation of real-world scene reconstruction.</p>

		<!-- OPEN3D -->
		<nav id="menu"></nav>
		<div id="content"></div>
		<!-- OPEN3D END -->

		<div class="col-lg-3">
			<h2>Paper</h2>
			<a href="paper.pdf" target="_blank" class="btn btn-default" role="button">
				<img src="image/index/paper.jpg" alt="Paper" width="110" height="140">
			</a>
		</div>
		<div class="col-lg-9">
			<h2>Bibtex</h2>
		Please cite our work if you use data from this site.
<pre>
@inproceedings{Park2017,
	author    = {Jaesik Park and Qian-Yi Zhou and Vladlen Koltun},
	title     = {Colored Point Cloud Registration Revisited},
	booktitle = {ICCV},
	year      = {2017},
}
</pre>
	</div>
	<div class="col-lg-12">
		<a href="supp.pdf" target="_blank" class="btn btn-default" role="button">
			<span class="glyphicon glyphicon-paperclip"></span> Supplementary
		</a><br>
		<a href="#" target="_blank" class="btn btn-default" role="button">
			<span class="glyphicon glyphicon-pencil"></span> Code
		</a>
		<p><br></p>
	</div>
</div>


<!-- Footer -->
<footer>
		<div class="container">
				<div class="row">
						<div class="col-lg-12">
								<p><br></p>
								<p class="copyright text-center">Copyright &copy; 2017.</p>
								<p><br></p>
						</div>
				</div>
		</div>
</footer>

<!-- jQuery -->
<script src="js/jquery.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="js/bootstrap.min.js"></script>

<!-- Plugin JavaScript for Navbar -->
<script src="js/jquery.easing.min.js"></script>

<!-- Theme JavaScript for Navbar -->
<script src="js/freelancer.js"></script>

</body>

</html>
